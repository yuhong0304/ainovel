{% extends "base.html" %}

{% block title %}工具箱 - 番茄小说Agent{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">🧰 创作工具箱</h1>
</div>

<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">

    <!-- 角色数据库 -->
    <div class="card" style="padding: 24px;">
        <h3 style="margin-bottom: 16px;">👤 角色数据库</h3>
        <p style="color: var(--text-secondary); margin-bottom: 16px;">管理小说中的所有角色</p>
        <button class="btn btn-primary" onclick="showCharactersModal()">管理角色</button>
    </div>

    <!-- 世界观设定 -->
    <div class="card" style="padding: 24px;">
        <h3 style="margin-bottom: 16px;">🌍 世界观设定</h3>
        <p style="color: var(--text-secondary); margin-bottom: 16px;">地点、势力、道具、规则</p>
        <button class="btn btn-primary" onclick="showWorldbuildingModal()">管理设定</button>
    </div>

    <!-- 伏笔管理 -->
    <div class="card" style="padding: 24px;">
        <h3 style="margin-bottom: 16px;">🎯 伏笔管理</h3>
        <p style="color: var(--text-secondary); margin-bottom: 16px;">追踪伏笔的埋设与回收</p>
        <button class="btn btn-primary" onclick="showForeshadowingModal()">管理伏笔</button>
    </div>

    <!-- 时间线 -->
    <div class="card" style="padding: 24px;">
        <h3 style="margin-bottom: 16px;">📅 时间线</h3>
        <p style="color: var(--text-secondary); margin-bottom: 16px;">可视化剧情时间轴</p>
        <button class="btn btn-primary" onclick="showTimelineModal()">查看时间线</button>
    </div>

    <!-- 写作统计 -->
    <div class="card" style="padding: 24px;">
        <h3 style="margin-bottom: 16px;">📊 写作统计</h3>
        <p style="color: var(--text-secondary); margin-bottom: 16px;">字数、章节、词频分析</p>
        <button class="btn btn-primary" onclick="showStatisticsModal()">查看统计</button>
    </div>

    <!-- 搜索替换 -->
    <div class="card" style="padding: 24px;">
        <h3 style="margin-bottom: 16px;">🔍 搜索替换</h3>
        <p style="color: var(--text-secondary); margin-bottom: 16px;">全文搜索和批量替换</p>
        <button class="btn btn-primary" onclick="showSearchModal()">搜索替换</button>
    </div>

    <!-- 导出 -->
    <div class="card" style="padding: 24px;">
        <h3 style="margin-bottom: 16px;">📥 导出</h3>
        <p style="color: var(--text-secondary); margin-bottom: 16px;">导出TXT、ZIP、合并版</p>
        <button class="btn btn-primary" onclick="showExportModal()">导出</button>
    </div>

    <!-- 生成历史 -->
    <div class="card" style="padding: 24px;">
        <h3 style="margin-bottom: 16px;">📜 生成历史</h3>
        <p style="color: var(--text-secondary); margin-bottom: 16px;">查看所有AI生成记录</p>
        <button class="btn btn-primary" onclick="showHistoryModal()">查看历史</button>
    </div>

    <!-- 批量生成 -->
    <div class="card" style="padding: 24px;">
        <h3 style="margin-bottom: 16px;">⚡ 批量生成</h3>
        <p style="color: var(--text-secondary); margin-bottom: 16px;">一次生成多个章节</p>
        <button class="btn btn-primary" onclick="showBatchModal()">批量生成</button>
    </div>

</div>

<!-- 当前项目选择 -->
<div style="margin-top: 24px; padding: 16px; background: var(--bg-card); border-radius: var(--radius);">
    <label class="form-label">当前项目</label>
    <select id="currentProject" class="form-select" style="max-width: 300px;">
        <option value="">选择项目...</option>
    </select>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/tools_v2.js?v=fix3"></script>
{% endblock %}